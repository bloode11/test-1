from abc import ABC, abstractmethod
from enum import Enum

class RequestType(Enum):
    TYPE_A = 1
    TYPE_B = 2

class Request:
    def __init__(self, type_: RequestType):
        self.type = type_

class Handler(ABC):
    @abstractmethod
    def handle_request(self, request: Request):
        pass
    
    @abstractmethod
    def set_next_handler(self, next_handler):
        pass

class ConcreteHandlerA(Handler):
    def __init__(self):
        self.next_handler = None
    
    def handle_request(self, request: Request):
        if request.type == RequestType.TYPE_A:
            print("ConcreteHandlerA handled the request.")
        elif self.next_handler is not None:
            self.next_handler.handle_request(request)
    
    def set_next_handler(self, next_handler):
        self.next_handler = next_handler

class ConcreteHandlerB(Handler):
    def __init__(self):
        self.next_handler = None
    
    def handle_request(self, request: Request):
        if request.type == RequestType.TYPE_B:
            print("ConcreteHandlerB handled the request.")
        elif self.next_handler is not None:
            self.next_handler.handle_request(request)
    
    def set_next_handler(self, next_handler):
        self.next_handler = next_handler

if __name__ == "__main__":
    handler_a = ConcreteHandlerA()
    handler_b = ConcreteHandlerB()
    
    handler_a.set_next_handler(handler_b)
    
    request_a = Request(RequestType.TYPE_A)
    request_b = Request(RequestType.TYPE_B)
    
    handler_a.handle_request(request_a)  # ConcreteHandlerA handled the request.
    handler_a.handle_request(request_b)  # ConcreteHandlerB handled the request.
